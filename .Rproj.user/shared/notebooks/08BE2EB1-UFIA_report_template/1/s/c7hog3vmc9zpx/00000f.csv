"0","#***************************************************"
"0","# Outside values from references"
"0",""
"0","runoff.dollar.value <- 0.008936 # $0.008936 per gallon of runoff avoided"
"0",""
"0","carb.dollar.value <- 188 # $188 per **metric** ton of carbon "
"0",""
"0","#***************************************************"
"0","# Figure themes"
"0",""
"0","theme_Publication<-function(base_size=12,base_family=""sans""){"
"0","  library(grid)"
"0","  library(ggthemes)"
"0","  (theme_foundation(base_size=base_size, base_family=base_family)+"
"0","      theme(plot.title=element_text(face=""bold"", size=rel(1.2),hjust=0.5),"
"0","            text=element_text(),"
"0","            panel.background = element_rect(color = NA),"
"0","            plot.background = element_rect(color = NA),"
"0","            panel.border = element_rect(color = NA),"
"0","            axis.title = element_text(face = ""bold"", size=rel(1)),"
"0","            axis.title.y = element_text(angle=90, vjust = 2),"
"0","            axis.title.x = element_text(vjust=-0.2),"
"0","            axis.text=element_text(),"
"0","            axis.line = element_line(color=""black""),"
"0","            axis.ticks = element_line(),"
"0","            panel.grid.major = element_blank(),"
"0","            panel.grid.minor = element_blank(),"
"0","            legend.key = element_rect(color = NA),"
"0","            legend.position = ""bottom"","
"0","            legend.direction = ""horizontal"","
"0","            legend.key.size = unit(0.2,""cm""),"
"0","            legend.spacing = unit(0,""cm""),"
"0","            legend.title = element_text(face=""italic""),"
"0","            plot.margin = unit(c(10,5,5,5),""mm""),"
"0","            strip.background = element_rect(color=""#f0f0f0"",fill=""#f0f0f0""),"
"0","            strip.text = element_text(face=""bold"")"
"0","      )"
"0","  )"
"0","}"
"0",""
"0","theme_map <- function(...) {"
"0","  theme_minimal() +"
"0","  theme("
"0","    #text = element_text(family = ""Ubuntu Regular"", color = ""#22211d""),"
"0","    axis.line = element_blank(),"
"0","    axis.text.x = element_blank(),"
"0","    axis.text.y = element_blank(),"
"0","    axis.ticks = element_blank(),"
"0","    axis.title.x = element_blank(),"
"0","    axis.title.y = element_blank(),"
"0","    # panel.grid.minor = element_line(color = ""#ebebe5"", size = 0.2),"
"0","    panel.grid.major = element_line(color = ""#ebebe5"", size = 0.2),"
"0","    panel.grid.minor = element_blank(),"
"0","    plot.background = element_rect(fill = NA, color = NA), "
"0","    panel.background = element_rect(fill = NA, color = NA), "
"0","    legend.background = element_rect(fill = NA, color = NA),"
"0","    panel.border = element_blank(),"
"0","    ..."
"0","  )"
"0","}"
"0",""
"0","scale_fill_Publication <- function(...){"
"0","      library(scales)"
"0","      discrete_scale(""fill"",""Publication"",manual_pal(values = c(""#999999"", ""#E69F00"", ""#56B4E9"", ""#009E73"", ""#F0E442"", ""#0072B2"", ""#D55E00"", ""#CC79A7"")), ...) #color blind friendly palette from http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/"
"0","}"
"0",""
"0","# Trees by size class color palette"
"0","Greens_mod2 <- RColorBrewer::brewer.pal(n= 9, name = ""Greens"")[c(3,5,7)]"
"0",""
"0","#NLCD colors"
"0","pal_nlcd <- data.frame("
"0","    class = c(""water"", ""water"","
"0","              ""developed"", ""developed"", ""developed"", ""developed"","
"0","              ""barren"","
"0","              ""forest"", ""forest"", ""forest"","
"0","              ""shrubland"", ""shrubland"","
"0","              ""herbaceous"", ""herbaceous"", ""herbaceous"", ""herbaceous"","
"0","              ""planted"", ""planted"","
"0","              ""wetlands"", ""wetlands""),"
"0","    code = as.character(c(11, 12,"
"0","             21, 22, 23, 24,"
"0","             31,"
"0","             41, 42, 43,"
"0","             51, 52,"
"0","             71, 72, 73, 74,"
"0","             81, 82,"
"0","             90, 95)),"
"0","    description = c(""Open Water"", ""Perennial Ice/Snow"","
"0","                    ""Developed, Open Space"", ""Developed, Low Intensity"", ""Developed, Medium Intensity"", ""Developed, High Intensity"","
"0","                    ""Barren Land (Rock/Sand/Clay)"","
"0","                    ""Deciduous Forest"", ""Evergreen Forest"", ""Mixed Forest"","
"0","                    ""Dwarf Scrub"", ""Scrub/Shrub"","
"0","                    ""Grassland/Herbaceous"", ""Sedge/Herbaceuous"", ""Lichens"", ""Moss"","
"0","                    ""Pasture/Hay"", ""Cultivated Crops"","
"0","                    ""Woody Wetlands"", ""Emergent Herbaceous Wetlands""),"
"0","    color = c(""#476BA0"", ""#D1DDF9"","
"0","              ""#DDC9C9"", ""#D89382"", ""#ED0000"", ""#AA0000"","
"0","              ""#B2ADA3"","
"0","              ""#68AA63"", ""#1C6330"", ""#B5C98E"","
"0","              ""#A58C30"", ""#CCBA7C"","
"0","              ""#E2E2C1"", ""#C9C977"", ""#99C147"", ""#77AD93"","
"0","              ""#DBD83D"", ""#AA7028"","
"0","              ""#BAD8EA"", ""#70A3BA""))"
"0",""
"0","#***************************************************"
"0","# Rounding functions"
"0",""
"0","millions<-function(data) {"
"0","a <- data"
"0","if(abs(a) > 1000000) {"
"0","  b <- format(round(as.numeric(a / 1000000), digits = 1), nsmall = 1)"
"0","  text <- paste(b,""million"")"
"0","} else if(abs(a) > 10000) {"
"0","  b <- format(round(as.numeric(a), digits = -3), big.mark = ',')"
"0","  text = b"
"0","} else {"
"0","  b <- format(round(as.numeric(a), digits = -2), big.mark = ',')"
"0","  text = b"
"0","}"
"0","return(text)"
"0","}"
"0",""
"0","millions2 <-function(data) {"
"0","a <- data"
"0","if (abs(a) > 1000000) {"
"0","  b <- round(as.numeric(a / 1000000), digits = 1)"
"0","  text <- paste(b,""million"")"
"0","} else {"
"0","  b <- format(round(as.numeric(a, digits = 0)), big.mark = ',')"
"0","  text = b"
"0","}"
"0","return(text)"
"0","}"
"0",""
"0","millions3 <-function(data) {"
"0","a <- data"
"0",""
"0","if (abs(a) > 1000000) {"
"0","  b <- format(round(as.numeric(a / 1000000), digits = 0), big.mark = ',')"
"0","  text <- paste(b,""million"")"
"0","} else {"
"0","  b <- format(round(as.numeric(a, digits = 0)), big.mark = ',')"
"0","  text = b"
"0","}"
"0","return(text)"
"0","}"
"0",""
"0","roundBM <- function(a) {"
"0","  if(is.na(a)) {b <- NA}"
"0","  else if(abs(a) > 1000000) {"
"0","  b <- format(round(as.numeric(a), digits = -4), big.mark = ',', scientific = F)"
"0","} else if(abs(a) > 10000) {"
"0","  b <- format(round(as.numeric(a), digits = -3), big.mark = ',', scientific = F)"
"0","} else if(abs(a) >= 1000) {"
"0","  b <- format(round(as.numeric(a), digits = -2), big.mark = ',', scientific = F)"
"0","} else if(abs(a) > 100) {"
"0","  b <- round(as.numeric(a), digits = -1)"
"0","} else {"
"0","  b <- round(as.numeric(a), digits = 0)"
"0","} "
"0","  return(b)"
"0","}"
"0",""
"0","roundPCT <- function(a) {"
"0","if(abs(a) > 1000000) {"
"0","  b <- round(as.numeric(a), digits = -4)"
"0","} else if(abs(a) > 10000) {"
"0","  b <- round(as.numeric(a), digits = -3)"
"0","} else if(abs(a) >= 1000) {"
"0","  b <- round(as.numeric(a), digits = -2)"
"0","} else if(abs(a) > 100) {"
"0","  b <- round(as.numeric(a), digits = 0)"
"0","} else {"
"0","  b <- round(as.numeric(a), digits = 1)"
"0","}"
"0","return(b)"
"0","}"
"0",""
"0","roundBM_PCT <- function(a) {"
"0","  if(is.na(a)) {b <- NA}"
"0","  else if(abs(a) > 1000000) {"
"0","  b <- format(round(as.numeric(a), digits = -4), big.mark = ',')"
"0","} else if(abs(a) > 10000) {"
"0","  b <- format(round(as.numeric(a), digits = -3), big.mark = ',')"
"0","} else if(abs(a) >= 1000) {"
"0","  b <- format(round(as.numeric(a), digits = -2), big.mark = ',')"
"0","} else if(abs(a) > 100) {"
"0","  b <- round(as.numeric(a), digits = -1)"
"0","} else {"
"0","  b <- round(as.numeric(a), digits = 1)"
"0","} "
"0","  return(b)"
"0","}"
"0",""
"0","#***************************************************"
"0","#Table Captions"
"0","#***************************************************"
"0",""
"0","table_nums <- captioner::captioner(prefix = ""Table"")"
"0",""
"0","tab.1_cap <- table_nums(name = ""tab_1"", caption = paste(""Summary of the urban forest estimates, "", city_name, "" "", report_year, sep = """"))"
"0",""
"0","tab.2_cap <- table_nums(name = ""tab_2"", caption = paste(""Description of aggregated National Land Cover Database (NLCD) land cover classes in "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.3_cap <- table_nums(name = ""tab_3"", caption = paste(""Sample area and count of plots within National Land Cover Database (NLCD) land cover classes in "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.4_cap <- table_nums(name = ""tab_4"", caption = paste(""Description of Forest Inventory and Analysis (FIA) land use classes and subclasses, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.5_cap <- table_nums(name = ""tab_5"", caption = paste(""Sample area and plot counts within Forest Inventory and Analysis (FIA) land use classes, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.6_cap <- table_nums(name = ""tab_6"", caption = paste(""Average percent tree, shrub, and impervious cover by Forest Inventory and Analysis (FIA) land use class, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.7_cap <- table_nums(name = ""tab_7"", caption = paste(""Distribution of percent of live trees within diameter classes by ownership, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.8_cap <- table_nums(name = ""tab_8"", caption = paste(""Distribution of live trees by Forest Inventory and Analysis (FIA) land use class and diameter class, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.9_cap <- table_nums(name = ""tab_9"", caption = paste(""Distribution of live trees by National Land Cover Database (NLCD) land cover class and diameter class, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.10_cap <- table_nums(name = ""tab_10"", caption = paste(""Urban forest species composition in "", city_name, "", "", report_year, sep = """"))"
"0",""
"0","tab.11_cap <- table_nums(name = ""tab_11"", caption = paste(""Live trees by size class for the ten most common tree species by number in "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.12_cap <- table_nums(name = ""tab_12"", caption = paste(""Top five tree species by number of trees within each diameter class, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.13_cap <- table_nums(name = ""tab_13"", caption = paste(""Species composition on private lands in "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.14_cap <- table_nums(name = ""tab_14"", caption = paste(""Species composition on public lands in "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.15_cap <- table_nums(name = ""tab_15"", caption = paste(""Top 10 tree species in maintained areas by number of trees, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.16_cap <- table_nums(name = ""tab_16"", caption = paste(""Ten most common species by Importance Value (IV), "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.17_cap <- table_nums(name = ""tab_17"", caption = paste(""Net cubic-foot volume for tree species with greatest net volume, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.18_cap <- table_nums(name = ""tab_18"", caption = paste(""Net board-foot sawtimber volume for tree species with greatest net volume, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.19_cap <- table_nums(name = ""tab_19"", caption = paste(""Aboveground biomass (green tons) for tree species with the greatest biomass, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.20_cap <- table_nums(name = ""tab_20"", caption = paste(""Associated value (dollars per year) and incidence (number of cases per year) of avoided health effects from changes in pollution concentrations due to pollution removal by trees in "", city_name, ""urban forest using 2015 atmospheric conditions."", sep = """"))"
"0",""
"0","tab.21_cap <- table_nums(name = ""tab_21"", caption = paste(""Annual energy savings^a^ (GJ or tons) due to trees 5+ inches in diameter near residential buildings, "", city_name, "", "", report_year, sep = """"))"
"0",""
"0","tab.22_cap <- table_nums(name = ""tab_22"", caption = paste(""Annual monetary savings^a,b^ due to trees 5+ inches in diameter near residential buildings during heating and cooling seasons, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.23_cap <- table_nums(name = ""tab_23"", caption = paste(""Aboveground and belowground carbon in live and standing dead trees by Forest Inventory and Analysis (FIA) land use, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.24_cap <- table_nums(name = ""tab_24"", caption = paste(""Tree species with greatest average dieback, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.25_cap <- table_nums(name = ""tab_25"", caption = paste(""Tree species with greatest average rot, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.26_cap <- table_nums(name = ""tab_26"", caption = paste(""Percentage of trees with observed damage, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.27_cap <- table_nums(name = ""tab_27"", caption = paste(""Species with greatest proportion of their population with infrastructure issues, by damage type, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.28_cap <- table_nums(name = ""tab_28"", caption = paste(""Number of trees classified as standing dead by species, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.29_cap <- table_nums(name = ""tab_29"", caption = paste(""Proportion of total dead tree population by species, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","###"
"0","tab.30_cap <- table_nums(name = ""tab_30"", caption = paste(""Potential risk associated with various insects and diseases, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.31_cap <- table_nums(name = ""tab_31"", caption = paste(""Pest risk rating by tree species in, "", city_name, "", "", report_year,  sep = """"))"
"0","###"
"0",""
"0","tab.32_cap <- table_nums(name = ""tab_32"", caption = paste(state_name_full, "" native tree species recorded in the Urban FIA inventory, "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.33_cap <- table_nums(name = ""tab_33"", caption = ""National Land Cover Database (NLCD) land cover descriptions"")"
"0",""
"0","tab.34_cap <- table_nums(name = ""tab_34"", caption = paste(""List of all live tree species and their characteristics, "", city_name, "", "", report_year,  sep = """"))  "
"0",""
"0","tab.35_cap <- table_nums(name = ""tab_35"", caption = paste(""Tree statistics by National Land Cover Database (NLCD) land cover class, extrapolated to sampling area scale from plot inventory"", city_name, "", "", report_year,  sep = """")) "
"0",""
"0","tab.36_cap <- table_nums(name = ""tab_36"", caption = paste(""Tree statistics by Forest Inventory and Analysis (FIA) land use, "", city_name, "", "", report_year,  sep = """")) "
"0",""
"0","tab.37_cap <- table_nums(name = ""tab_37"", caption = paste(""Species composition in maintained areas "", city_name, "", "", report_year,  sep = """")) "
"0",""
"0","tab.38_cap <- table_nums(name = ""tab_38"", caption = paste(""Percent of live trees identified with damage, maintenance and site issues in "", city_name, "", "", report_year,  sep = """"))"
"0",""
"0","tab.39_cap <- table_nums(name = ""tab_39"", caption = paste(""List of invasive plant species in "", city_name, "", "", report_year,  sep = """"))"
"0",""
